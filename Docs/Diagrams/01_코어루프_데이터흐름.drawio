<mxfile host="app.diagrams.net" modified="2026-02-04T00:00:00.000Z" agent="Claude" version="24.0.0" type="device">
  <diagram name="코어 게임 루프 데이터 흐름" id="core-loop">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- ============================================================ -->
        <!-- TITLE -->
        <!-- ============================================================ -->
        <mxCell id="title" value="DungeonHeroClicker — 코어 게임 루프" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontColor=#333333;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="20" width="460" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="subtitle" value="클릭 → 데미지 → 처치 → 골드 → 업그레이드 → 더 강해짐 → 반복" style="text;html=1;align=center;verticalAlign=middle;fontSize=12;fontColor=#999999;" vertex="1" parent="1">
          <mxGeometry x="330" y="55" width="540" height="25" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 1. CLICK (입력) -->
        <!-- ============================================================ -->
        <mxCell id="click" value="&lt;b style='font-size:14px'&gt;클릭&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;수동 터치 + 자동 DPS&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#5C6BC0;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="160" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="click_detail" value="ClickManager&lt;br&gt;AutoClickManager" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#5C6BC0;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="95" y="232" width="150" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 2. DAMAGE (데미지) -->
        <!-- ============================================================ -->
        <mxCell id="damage" value="&lt;b style='font-size:14px'&gt;데미지&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;ClickInfo 생성 → 전달&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#E53935;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="160" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="damage_detail" value="Monster.TakeDamage()&lt;br&gt;MonsterHealth" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#E53935;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="395" y="232" width="150" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 3. KILL (처치) -->
        <!-- ============================================================ -->
        <mxCell id="kill" value="&lt;b style='font-size:14px'&gt;처치&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;사망 → 보상 드롭&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="160" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="kill_detail" value="MonsterReward&lt;br&gt;OnGoldDropped (static event)" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#FF9800;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="685" y="232" width="170" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 4. GOLD (골드) -->
        <!-- ============================================================ -->
        <mxCell id="gold" value="&lt;b style='font-size:14px'&gt;골드 획득&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;재화 적립 + 저장&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F9A825;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="160" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="gold_detail" value="CurrencyManager&lt;br&gt;→ Firebase 저장" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#F9A825;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1000" y="232" width="140" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 5. UPGRADE (업그레이드) -->
        <!-- ============================================================ -->
        <mxCell id="upgrade" value="&lt;b style='font-size:14px'&gt;업그레이드&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;무기 강화 / 동료 고용&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="380" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="upgrade_detail" value="UpgradeManager&lt;br&gt;→ Firebase 저장" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#43A047;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1000" y="452" width="140" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 6. STRONGER (강화) -->
        <!-- ============================================================ -->
        <mxCell id="stronger" value="&lt;b style='font-size:14px'&gt;더 강해짐&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;클릭 데미지↑ / DPS↑&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#5C6BC0;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="380" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="stronger_detail" value="TotalClickDamage↑&lt;br&gt;TotalDPS↑" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#5C6BC0;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="400" y="452" width="140" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- 7. STAGE (스테이지 진행) - 하단 보조 -->
        <!-- ============================================================ -->
        <mxCell id="stage" value="&lt;b style='font-size:14px'&gt;스테이지 진행&lt;/b&gt;&lt;br&gt;&lt;font color='#666'&gt;킬 카운트 → 다음 스테이지&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontSize=12;arcSize=30;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="380" width="180" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="stage_detail" value="StageManager&lt;br&gt;몬스터 체력↑ 골드↑" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#1976D2;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="695" y="452" width="150" height="30" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- ARROWS (메인 루프 - 시계방향) -->
        <!-- ============================================================ -->

        <!-- 클릭 → 데미지 -->
        <mxCell id="a1" value="&lt;b&gt;ClickInfo&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#E53935;strokeWidth=3;fontSize=10;fontColor=#E53935;" edge="1" parent="1" source="click" target="damage">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 데미지 → 처치 -->
        <mxCell id="a2" value="&lt;b&gt;OnDeath&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#FF9800;strokeWidth=3;fontSize=10;fontColor=#FF9800;" edge="1" parent="1" source="damage" target="kill">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 처치 → 골드 -->
        <mxCell id="a3" value="&lt;b&gt;OnGoldDropped&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#F9A825;strokeWidth=3;fontSize=10;fontColor=#F9A825;" edge="1" parent="1" source="kill" target="gold">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 골드 → 업그레이드 -->
        <mxCell id="a4" value="&lt;b&gt;TrySpendGold&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#43A047;strokeWidth=3;fontSize=10;fontColor=#43A047;" edge="1" parent="1" source="gold" target="upgrade">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 업그레이드 → 더 강해짐 -->
        <mxCell id="a5" value="&lt;b&gt;OnItemUpgraded&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#5C6BC0;strokeWidth=3;fontSize=10;fontColor=#5C6BC0;" edge="1" parent="1" source="upgrade" target="stronger">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 더 강해짐 → 클릭 (루프 완성) -->
        <mxCell id="a6" value="&lt;b&gt;반복&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#5C6BC0;strokeWidth=3;fontSize=10;fontColor=#5C6BC0;curved=1;" edge="1" parent="1" source="stronger" target="click">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="170" y="415"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- 처치 → 스테이지 (보조 흐름) -->
        <mxCell id="a7" value="&lt;b&gt;OnMonsterKilled&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#1976D2;strokeWidth=2;fontSize=10;fontColor=#1976D2;" edge="1" parent="1" source="kill" target="stage">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- 스테이지 → 데미지 (몬스터 체력 스케일링) -->
        <mxCell id="a8" value="&lt;b&gt;몬스터 스탯 스케일링&lt;/b&gt;" style="endArrow=block;endFill=1;strokeColor=#1976D2;strokeWidth=2;fontSize=10;fontColor=#1976D2;dashed=1;" edge="1" parent="1" source="stage" target="damage">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="310"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ============================================================ -->
        <!-- DATA LABELS (화살표 위 데이터 타입) -->
        <!-- ============================================================ -->

        <!-- ============================================================ -->
        <!-- FEEDBACK AREA (상단 우측) -->
        <!-- ============================================================ -->
        <mxCell id="fb_box" value="&lt;b&gt;피드백 (연출)&lt;/b&gt;&lt;br&gt;데미지 팝업 · 파티클 · 카메라 쉐이크 · 골드 비행 이펙트" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#AB47BC;strokeWidth=1;fontSize=10;dashed=1;dashPattern=5 5;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="80" y="90" width="390" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="fb_arrow1" value="" style="endArrow=open;endFill=0;strokeColor=#AB47BC;strokeWidth=1;dashed=1;" edge="1" parent="1" source="damage" target="fb_box">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="fb_arrow2" value="" style="endArrow=open;endFill=0;strokeColor=#AB47BC;strokeWidth=1;dashed=1;" edge="1" parent="1" source="kill" target="fb_box">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- UI AREA (하단) -->
        <!-- ============================================================ -->
        <mxCell id="ui_box" value="&lt;b&gt;UI 표시&lt;/b&gt;&lt;br&gt;GoldDisplay · DPSDisplay · StageDisplay · MonsterHealthBar · UpgradeItemButton" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2DFDB;strokeColor=#00897B;strokeWidth=1;fontSize=10;dashed=1;dashPattern=5 5;arcSize=15;" vertex="1" parent="1">
          <mxGeometry x="310" y="530" width="580" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="ui_a1" value="" style="endArrow=open;endFill=0;strokeColor=#00897B;strokeWidth=1;dashed=1;" edge="1" parent="1" source="gold" target="ui_box">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1070" y="530"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ui_a2" value="" style="endArrow=open;endFill=0;strokeColor=#00897B;strokeWidth=1;dashed=1;" edge="1" parent="1" source="stage" target="ui_box">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ui_a3" value="" style="endArrow=open;endFill=0;strokeColor=#00897B;strokeWidth=1;dashed=1;" edge="1" parent="1" source="upgrade" target="ui_box">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1070" y="540"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ============================================================ -->
        <!-- FIREBASE (우하단) -->
        <!-- ============================================================ -->
        <mxCell id="firebase" value="&lt;b&gt;Firebase&lt;/b&gt;&lt;br&gt;Firestore + Auth" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=11;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1220" y="280" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="fb_a1" value="" style="endArrow=open;endFill=0;strokeColor=#FF9800;strokeWidth=1;dashed=1;" edge="1" parent="1" source="gold" target="firebase">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="fb_a2" value="" style="endArrow=open;endFill=0;strokeColor=#FF9800;strokeWidth=1;dashed=1;" edge="1" parent="1" source="upgrade" target="firebase">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ============================================================ -->
        <!-- LEGEND -->
        <!-- ============================================================ -->
        <mxCell id="legend" value="━━▶ 데이터 흐름 &amp;nbsp;&amp;nbsp;&amp;nbsp; - - -▶ 이벤트 구독 &amp;nbsp;&amp;nbsp;&amp;nbsp; 화살표 색 = 데이터 종류" style="text;html=1;align=center;verticalAlign=middle;fontSize=10;fontColor=#999999;" vertex="1" parent="1">
          <mxGeometry x="350" y="590" width="500" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>