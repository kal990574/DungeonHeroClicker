<mxfile host="app.diagrams.net" modified="2026-02-04T00:00:00.000Z" agent="Claude" version="24.0.0" type="device">
  <diagram name="전체 구조도" id="overview">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- TITLE -->
        <mxCell id="t1" value="전체 구조도" style="text;html=1;align=left;verticalAlign=middle;fontSize=22;fontColor=#222222;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="250" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="t2" value="&quot;이 시스템은 뭘로 구성되어 있는가?&quot;" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;fontColor=#888888;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="350" height="20" as="geometry"/>
        </mxCell>

        <!-- ====== 6개 모듈 (3 x 2 그리드) ====== -->

        <!-- Row 1 -->
        <!-- Click System -->
        <mxCell id="m_click" value="&lt;b style='font-size:15px'&gt;Click System&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;수동 터치 입력 처리&lt;br&gt;자동 DPS 타이머&lt;br&gt;크리티컬 판정&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#5C6BC0;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="200" height="120" as="geometry"/>
        </mxCell>

        <!-- Monster System -->
        <mxCell id="m_monster" value="&lt;b style='font-size:15px'&gt;Monster System&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;체력 관리 (IDamageable)&lt;br&gt;사망 → 보상 드롭&lt;br&gt;스폰 / 애니메이션&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#E53935;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="210" height="120" as="geometry"/>
        </mxCell>

        <!-- Hero & Companion -->
        <mxCell id="m_hero" value="&lt;b style='font-size:15px'&gt;Hero &amp; Companion&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;용사 비주얼 / 티어 변화&lt;br&gt;동료 스폰 / 공격 모션&lt;br&gt;피드백 연출 (VFX)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#AB47BC;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="100" width="210" height="120" as="geometry"/>
        </mxCell>

        <!-- Row 2 -->
        <!-- Currency -->
        <mxCell id="m_currency" value="&lt;b style='font-size:15px'&gt;Currency&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;골드 적립 / 소비&lt;br&gt;BigNumber 기반 대수&lt;br&gt;Firebase 동기화&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="200" height="120" as="geometry"/>
        </mxCell>

        <!-- Upgrade -->
        <mxCell id="m_upgrade" value="&lt;b style='font-size:15px'&gt;Upgrade&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;무기 강화 (클릭 데미지↑)&lt;br&gt;동료 고용 (DPS↑)&lt;br&gt;비용 스케일링 1.15^n&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="280" width="210" height="120" as="geometry"/>
        </mxCell>

        <!-- Stage -->
        <mxCell id="m_stage" value="&lt;b style='font-size:15px'&gt;Stage&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;font color='#666'&gt;킬 카운트 → 스테이지 진행&lt;br&gt;몬스터 스탯 스케일링&lt;br&gt;Firebase 동기화&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontSize=11;verticalAlign=top;spacingTop=8;arcSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="280" width="210" height="120" as="geometry"/>
        </mxCell>

        <!-- ====== 하단: 공통 인프라 ====== -->
        <mxCell id="m_ui" value="&lt;b&gt;UI Layer&lt;/b&gt;  GoldDisplay · DPSDisplay · StageDisplay · HealthBar · UpgradeButton" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B2DFDB;strokeColor=#00897B;strokeWidth=1.5;fontSize=10;arcSize=15;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="450" width="700" height="35" as="geometry"/>
        </mxCell>
        <mxCell id="m_core" value="&lt;b&gt;Core&lt;/b&gt;  BigNumber · SFXManager · Firebase · DOTween · LeanPool · UniTask" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#90A4AE;strokeWidth=1.5;fontSize=10;arcSize=15;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="500" width="700" height="35" as="geometry"/>
        </mxCell>

        <!-- ====== 화살표 (핵심 흐름만) ====== -->

        <!-- Click → Monster (데미지) -->
        <mxCell id="a1" value="데미지" style="endArrow=block;endFill=1;strokeColor=#E53935;strokeWidth=2;fontSize=10;fontColor=#E53935;fontStyle=1;" edge="1" parent="1" source="m_click" target="m_monster">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Monster → Currency (골드) -->
        <mxCell id="a2" value="골드 드롭" style="endArrow=block;endFill=1;strokeColor=#FF9800;strokeWidth=2;fontSize=10;fontColor=#FF9800;fontStyle=1;" edge="1" parent="1" source="m_monster" target="m_currency">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Currency → Upgrade (골드 소비) -->
        <mxCell id="a3" value="골드 소비" style="endArrow=block;endFill=1;strokeColor=#43A047;strokeWidth=2;fontSize=10;fontColor=#43A047;fontStyle=1;" edge="1" parent="1" source="m_currency" target="m_upgrade">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Upgrade → Click (데미지 증가) -->
        <mxCell id="a4" value="데미지↑" style="endArrow=block;endFill=1;strokeColor=#5C6BC0;strokeWidth=2;fontSize=10;fontColor=#5C6BC0;fontStyle=1;curved=1;" edge="1" parent="1" source="m_upgrade" target="m_click">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="140" y="240"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Upgrade → Hero (비주얼 변경) -->
        <mxCell id="a5" value="비주얼" style="endArrow=block;endFill=1;strokeColor=#AB47BC;strokeWidth=1.5;fontSize=9;fontColor=#AB47BC;" edge="1" parent="1" source="m_upgrade" target="m_hero">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="530" y="340"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Monster → Stage (킬 카운트) -->
        <mxCell id="a6" value="킬 카운트" style="endArrow=block;endFill=1;strokeColor=#1976D2;strokeWidth=1.5;fontSize=9;fontColor=#1976D2;" edge="1" parent="1" source="m_monster" target="m_stage">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="530" y="200"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Stage → Monster (스탯 스케일링, 점선) -->
        <mxCell id="a7" value="스탯↑" style="endArrow=block;endFill=1;strokeColor=#1976D2;strokeWidth=1.5;fontSize=9;fontColor=#1976D2;dashed=1;" edge="1" parent="1" source="m_stage" target="m_monster">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="490" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- 모든 모듈 → UI (점선) -->
        <mxCell id="a_ui" value="이벤트 → UI 갱신" style="endArrow=open;endFill=0;strokeColor=#00897B;strokeWidth=1;dashed=1;fontSize=9;fontColor=#00897B;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="410" as="sourcePoint"/>
            <mxPoint x="390" y="450" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- ====== 판단 근거 (우측 메모) ====== -->
        <mxCell id="note" value="&lt;b&gt;왜 이렇게 나눴는가&lt;/b&gt;&lt;hr&gt;&lt;b&gt;Ingame vs Outgame&lt;/b&gt;&lt;br&gt;상단 3개 = 인게임 (실시간 전투)&lt;br&gt;하단 3개 = 아웃게임 (영속 데이터)&lt;br&gt;&lt;br&gt;&lt;b&gt;순환 구조&lt;/b&gt;&lt;br&gt;Click → Monster → Currency&lt;br&gt;→ Upgrade → Click (코어 루프)&lt;br&gt;&lt;br&gt;&lt;b&gt;관심사 분리&lt;/b&gt;&lt;br&gt;각 모듈은 하나의 책임만 가짐&lt;br&gt;모듈간 통신은 이벤트 기반" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#E0E0E0;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="790" y="100" width="210" height="240" as="geometry"/>
        </mxCell>

        <!-- 범례 -->
        <mxCell id="leg" value="━▶ 데이터 전달 &amp;nbsp; - -▶ 스케일링/이벤트 &amp;nbsp; 화살표 색 = 데이터 종류" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#AAAAAA;" vertex="1" parent="1">
          <mxGeometry x="140" y="550" width="500" height="18" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>