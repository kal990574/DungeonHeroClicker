<mxfile host="app.diagrams.net" modified="2026-02-04T00:00:00.000Z" agent="Claude" version="24.0.0" type="device">
  <diagram name="클래스 관계도" id="class-rel">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1300" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- TITLE -->
        <mxCell id="t1" value="클래스 관계도" style="text;html=1;align=left;verticalAlign=middle;fontSize=22;fontColor=#222222;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="250" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="t2" value="&quot;핵심 클래스들이 어떻게 연결되어 있는가?&quot;" style="text;html=1;align=left;verticalAlign=middle;fontSize=12;fontColor=#888888;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="400" height="20" as="geometry"/>
        </mxCell>

        <!-- ====== INTERFACES (상단) ====== -->

        <mxCell id="i_dmg" value="&amp;laquo;interface&amp;raquo;&#xa;IDamageable" style="swimlane;fontStyle=1;align=center;startSize=35;fontSize=11;fillColor=#C8E6C9;strokeColor=#43A047;" vertex="1" parent="1">
          <mxGeometry x="60" y="100" width="160" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="i_dmg_m" value="TakeDamage(ClickInfo)" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=10;fontColor=#555;" vertex="1" parent="i_dmg">
          <mxGeometry y="35" width="160" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="i_click" value="&amp;laquo;interface&amp;raquo;&#xa;IClickable" style="swimlane;fontStyle=1;align=center;startSize=35;fontSize=11;fillColor=#C8E6C9;strokeColor=#43A047;" vertex="1" parent="1">
          <mxGeometry x="260" y="100" width="140" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="i_click_m" value="OnClick()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=10;fontColor=#555;" vertex="1" parent="i_click">
          <mxGeometry y="35" width="140" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="i_repo" value="&amp;laquo;interface&amp;raquo;&#xa;ICurrencyRepository" style="swimlane;fontStyle=1;align=center;startSize=35;fontSize=11;fillColor=#C8E6C9;strokeColor=#43A047;" vertex="1" parent="1">
          <mxGeometry x="440" y="100" width="180" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="i_repo_m" value="Save() / Load()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=10;fontColor=#555;" vertex="1" parent="i_repo">
          <mxGeometry y="35" width="180" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="i_fb" value="&amp;laquo;interface&amp;raquo;&#xa;IFeedback" style="swimlane;fontStyle=1;align=center;startSize=35;fontSize=11;fillColor=#C8E6C9;strokeColor=#43A047;" vertex="1" parent="1">
          <mxGeometry x="660" y="100" width="140" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="i_fb_m" value="Play() / Stop()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=10;fontColor=#555;" vertex="1" parent="i_fb">
          <mxGeometry y="35" width="140" height="25" as="geometry"/>
        </mxCell>

        <!-- ====== CONCRETE CLASSES ====== -->

        <!-- Monster (implements IDamageable, IClickable) -->
        <mxCell id="c_monster" value="Monster" style="swimlane;fontStyle=1;align=center;startSize=28;fontSize=13;fillColor=#FFEBEE;strokeColor=#E53935;" vertex="1" parent="1">
          <mxGeometry x="60" y="260" width="180" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="c_monster_f" value="- _health : MonsterHealth&#xa;- _feedbackPlayer&#xa;+ OnMonsterDeath : Action" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_monster">
          <mxGeometry y="28" width="180" height="45" as="geometry"/>
        </mxCell>
        <mxCell id="c_monster_sep" value="" style="line;strokeWidth=1;fillColor=none;" vertex="1" parent="c_monster">
          <mxGeometry y="73" width="180" height="5" as="geometry"/>
        </mxCell>
        <mxCell id="c_monster_m" value="TakeDamage() / OnClick()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_monster">
          <mxGeometry y="78" width="180" height="20" as="geometry"/>
        </mxCell>

        <!-- MonsterHealth (composition) -->
        <mxCell id="c_mhp" value="MonsterHealth" style="swimlane;fontStyle=1;align=center;startSize=25;fontSize=11;fillColor=#FFEBEE;strokeColor=#E53935;" vertex="1" parent="1">
          <mxGeometry x="60" y="420" width="180" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="c_mhp_f" value="+ OnDamaged : Action&lt;BigNumber&gt;&#xa;+ OnDeath : Action" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_mhp">
          <mxGeometry y="25" width="180" height="35" as="geometry"/>
        </mxCell>

        <!-- MonsterReward -->
        <mxCell id="c_mrew" value="MonsterReward" style="swimlane;fontStyle=1;align=center;startSize=25;fontSize=11;fillColor=#FFEBEE;strokeColor=#E53935;" vertex="1" parent="1">
          <mxGeometry x="280" y="420" width="180" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="c_mrew_f" value="+ OnGoldDropped : Action (static)&#xa;+ DropReward()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_mrew">
          <mxGeometry y="25" width="180" height="35" as="geometry"/>
        </mxCell>

        <!-- ClickManager -->
        <mxCell id="c_click" value="ClickManager" style="swimlane;fontStyle=1;align=center;startSize=28;fontSize=13;fillColor=#E8EAF6;strokeColor=#5C6BC0;" vertex="1" parent="1">
          <mxGeometry x="290" y="260" width="170" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="c_click_f" value="- _upgradeManager&#xa;- _heroAnimator" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_click">
          <mxGeometry y="28" width="170" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="c_click_sep" value="" style="line;strokeWidth=1;fillColor=none;" vertex="1" parent="c_click">
          <mxGeometry y="58" width="170" height="5" as="geometry"/>
        </mxCell>
        <mxCell id="c_click_m" value="TryClick() / DealClickDamage()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_click">
          <mxGeometry y="63" width="170" height="17" as="geometry"/>
        </mxCell>

        <!-- CurrencyManager -->
        <mxCell id="c_curr" value="CurrencyManager" style="swimlane;fontStyle=1;align=center;startSize=28;fontSize=13;fillColor=#FFF3E0;strokeColor=#FF9800;" vertex="1" parent="1">
          <mxGeometry x="510" y="260" width="180" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="c_curr_f" value="- _repository : ICurrencyRepository&#xa;+ OnCurrencyChanged : Action" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_curr">
          <mxGeometry y="28" width="180" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="c_curr_sep" value="" style="line;strokeWidth=1;fillColor=none;" vertex="1" parent="c_curr">
          <mxGeometry y="58" width="180" height="5" as="geometry"/>
        </mxCell>
        <mxCell id="c_curr_m" value="AddGold() / TrySpendGold()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_curr">
          <mxGeometry y="63" width="180" height="17" as="geometry"/>
        </mxCell>

        <!-- UpgradeManager -->
        <mxCell id="c_upg" value="UpgradeManager" style="swimlane;fontStyle=1;align=center;startSize=28;fontSize=13;fillColor=#E8F5E9;strokeColor=#43A047;" vertex="1" parent="1">
          <mxGeometry x="510" y="410" width="200" height="95" as="geometry"/>
        </mxCell>
        <mxCell id="c_upg_f" value="- _repository : IUpgradeRepository&#xa;- _currencyManager&#xa;+ OnItemUpgraded : Action" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_upg">
          <mxGeometry y="28" width="200" height="37" as="geometry"/>
        </mxCell>
        <mxCell id="c_upg_sep" value="" style="line;strokeWidth=1;fillColor=none;" vertex="1" parent="c_upg">
          <mxGeometry y="65" width="200" height="5" as="geometry"/>
        </mxCell>
        <mxCell id="c_upg_m" value="TryUpgrade() / TryPurchase()" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_upg">
          <mxGeometry y="70" width="200" height="20" as="geometry"/>
        </mxCell>

        <!-- FeedbackPlayer -->
        <mxCell id="c_fbp" value="FeedbackPlayer" style="swimlane;fontStyle=1;align=center;startSize=25;fontSize=11;fillColor=#F3E5F5;strokeColor=#AB47BC;" vertex="1" parent="1">
          <mxGeometry x="750" y="260" width="170" height="65" as="geometry"/>
        </mxCell>
        <mxCell id="c_fbp_f" value="Scale · Particle · Popup · Flash" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_fbp">
          <mxGeometry y="25" width="170" height="20" as="geometry"/>
        </mxCell>

        <!-- Firebase Repository -->
        <mxCell id="c_firebase" value="FirebaseCurrencyRepo" style="swimlane;fontStyle=1;align=center;startSize=25;fontSize=11;fillColor=#FFF9C4;strokeColor=#F9A825;" vertex="1" parent="1">
          <mxGeometry x="750" y="410" width="170" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="c_firebase_f" value="Firestore CRUD" style="text;align=left;verticalAlign=top;spacingLeft=4;fontSize=9;fontColor=#555;" vertex="1" parent="c_firebase">
          <mxGeometry y="25" width="170" height="18" as="geometry"/>
        </mxCell>

        <!-- ====== RELATIONSHIPS ====== -->

        <!-- Monster --implements--> IDamageable -->
        <mxCell id="r1" value="" style="endArrow=block;endFill=0;dashed=1;dashPattern=8 4;strokeColor=#43A047;strokeWidth=2;" edge="1" parent="1" source="c_monster" target="i_dmg">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Monster --implements--> IClickable -->
        <mxCell id="r2" value="" style="endArrow=block;endFill=0;dashed=1;dashPattern=8 4;strokeColor=#43A047;strokeWidth=2;" edge="1" parent="1" source="c_monster" target="i_click">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Monster ◆---> MonsterHealth (composition) -->
        <mxCell id="r3" value="◆" style="endArrow=none;startArrow=none;strokeColor=#E53935;strokeWidth=1.5;fontSize=12;fontColor=#E53935;startFill=0;endFill=0;" edge="1" parent="1" source="c_monster" target="c_mhp">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- MonsterHealth --event--> MonsterReward -->
        <mxCell id="r4" value="OnDeath" style="endArrow=open;endFill=0;dashed=1;strokeColor=#FF9800;strokeWidth=1.5;fontSize=9;fontColor=#FF9800;" edge="1" parent="1" source="c_mhp" target="c_mrew">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- MonsterReward --static event--> CurrencyManager -->
        <mxCell id="r5" value="OnGoldDropped" style="endArrow=open;endFill=0;dashed=1;strokeColor=#FF9800;strokeWidth=1.5;fontSize=9;fontColor=#FF9800;" edge="1" parent="1" source="c_mrew" target="c_curr">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="480" y="460"/>
              <mxPoint x="480" y="310"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ClickManager --uses--> IDamageable (DIP) -->
        <mxCell id="r6" value="" style="endArrow=open;endFill=0;dashed=1;strokeColor=#5C6BC0;strokeWidth=1.5;" edge="1" parent="1" source="c_click" target="i_dmg">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ClickManager --uses--> UpgradeManager -->
        <mxCell id="r7" value="TotalClickDamage" style="endArrow=open;endFill=0;strokeColor=#999;strokeWidth=1;fontSize=9;fontColor=#999;" edge="1" parent="1" source="c_click" target="c_upg">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="460" y="340"/>
              <mxPoint x="460" y="450"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- CurrencyManager --uses--> ICurrencyRepository (DIP) -->
        <mxCell id="r8" value="DIP" style="endArrow=open;endFill=0;dashed=1;strokeColor=#43A047;strokeWidth=2;fontSize=10;fontColor=#43A047;fontStyle=1;" edge="1" parent="1" source="c_curr" target="i_repo">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- FirebaseRepo --implements--> ICurrencyRepository -->
        <mxCell id="r9" value="" style="endArrow=block;endFill=0;dashed=1;dashPattern=8 4;strokeColor=#43A047;strokeWidth=2;" edge="1" parent="1" source="c_firebase" target="i_repo">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- UpgradeManager --uses--> CurrencyManager -->
        <mxCell id="r10" value="TrySpendGold" style="endArrow=open;endFill=0;strokeColor=#999;strokeWidth=1;fontSize=9;fontColor=#999;" edge="1" parent="1" source="c_upg" target="c_curr">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- FeedbackPlayer --uses--> IFeedback -->
        <mxCell id="r11" value="" style="endArrow=open;endFill=0;dashed=1;strokeColor=#AB47BC;strokeWidth=1.5;" edge="1" parent="1" source="c_fbp" target="i_fb">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ====== 판단 근거 메모 ====== -->
        <mxCell id="note" value="&lt;b&gt;왜 이렇게 설계했는가&lt;/b&gt;&lt;hr&gt;&lt;b&gt;IDamageable 추상화&lt;/b&gt;&lt;br&gt;ClickManager는 Monster를 직접 모른다.&lt;br&gt;인터페이스만 알면 되므로 결합도↓&lt;br&gt;&lt;br&gt;&lt;b&gt;Repository DIP&lt;/b&gt;&lt;br&gt;Manager → Interface ← Firebase&lt;br&gt;저장소 교체 시 Manager 수정 없음&lt;br&gt;&lt;br&gt;&lt;b&gt;이벤트 기반 통신&lt;/b&gt;&lt;br&gt;static event(OnGoldDropped)로&lt;br&gt;MonsterReward↔CurrencyManager&lt;br&gt;직접 참조 없이 느슨한 결합" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#E0E0E0;fontSize=10;align=left;verticalAlign=top;spacingLeft=8;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="960" y="100" width="220" height="260" as="geometry"/>
        </mxCell>

        <!-- 범례 -->
        <mxCell id="leg_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#E0E0E0;container=1;collapsible=0;" vertex="1" parent="1">
          <mxGeometry x="60" y="540" width="600" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="leg1" value="&lt;font color='#43A047'&gt;- - ▷&lt;/font&gt; implements" style="text;html=1;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="leg_box">
          <mxGeometry x="10" y="5" width="120" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="leg2" value="&lt;font color='#43A047'&gt;- - ▷&lt;/font&gt; depends on (DIP)" style="text;html=1;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="leg_box">
          <mxGeometry x="140" y="5" width="160" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="leg3" value="&lt;font color='#FF9800'&gt;- - ▷&lt;/font&gt; event 구독" style="text;html=1;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="leg_box">
          <mxGeometry x="310" y="5" width="120" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="leg4" value="&lt;font color='#E53935'&gt;◆&lt;/font&gt; composition (소유)" style="text;html=1;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="leg_box">
          <mxGeometry x="440" y="5" width="150" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="leg5" value="&lt;font color='#C8E6C9'&gt;██&lt;/font&gt; Interface &amp;nbsp; &lt;font color='#FFEBEE'&gt;██&lt;/font&gt; Ingame &amp;nbsp; &lt;font color='#FFF3E0'&gt;██&lt;/font&gt; Manager &amp;nbsp; &lt;font color='#FFF9C4'&gt;██&lt;/font&gt; Repository" style="text;html=1;align=left;verticalAlign=middle;fontSize=10;" vertex="1" parent="leg_box">
          <mxGeometry x="10" y="25" width="500" height="18" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>